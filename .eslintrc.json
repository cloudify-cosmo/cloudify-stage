{
    "rules": {
        "@typescript-eslint/no-namespace": [
            "error",
            {
                "allowDeclarations": true
            }
        ]
    },
    "overrides": [
        {
            "extends": [
                "./node_modules/cloudify-ui-common/configs/eslint-common-node.json",
                "./.eslintrc.temp-overrides.json"
            ],
            "files": ["./*.{js,ts}", "scripts/*.js"],
            "rules": {
                "import/no-extraneous-dependencies": [
                    "error",
                    {
                        "devDependencies": true
                    }
                ],
                "no-console": "off",
                "security/detect-child-process": "off",
                "no-process-exit": "off"
            },
            "env": {
                "node": true
            }
        },
        // from /app/.eslint.json
        {
            "files": ["app/**"],

            "extends": [
                "plugin:react/recommended",
                "./node_modules/cloudify-ui-common/configs/eslint-common-react.json",
                "./.eslintrc.temp-overrides.json"
            ],
            "rules": {
                "no-console": "error",
                "prefer-promise-reject-errors": "off"
            },
            "env": {
                "jquery": true
            },
            "overrides": [
                {
                    "files": ["*.ts"],
                    "rules": {
                        // NOTE: results in false-positives in regular classes for `context` properties
                        "react/static-property-placement": "off"
                    }
                }
            ]
        
        },
        // from /app/.eslint.json
        {
            "files": ["app/*.ts"],
            "extends": [
                "plugin:react/recommended",
                "./node_modules/cloudify-ui-common/configs/eslint-common-react.json",
                "./.eslintrc.temp-overrides.json"
            ],
            "rules": {
                "no-console": "error",
                "prefer-promise-reject-errors": "off",
                // NOTE: results in false-positives in regular classes for `context` properties
                "react/static-property-placement": "off"
            },
            "env": {
                "jquery": true
            }
        },
        // from /widgets/.eslint.json
        {
            "files": ["widgets/**", "test/cypress/fixtures/widgets/**"],
            "extends": [
                "plugin:react/recommended",
                "./node_modules/cloudify-ui-common/configs/eslint-common-react.json",
                "./.eslintrc.temp-overrides.json"
            ],
            "rules": {
                "no-console": "error",
                "prefer-promise-reject-errors": "off",
                "@typescript-eslint/no-namespace": "off"
            },
            "globals": {
                "_": true,
                "$": true,
                "connectToStore": true,
                "d3": true,
                "log": true,
                "L": true,
                "moment": true,
                "PropTypes": true,
                "React": true,
                "Stage": true
            }
        },
        // from /widgets/.eslint.json
        {
            "files": ["./widgets/*/src/backend.ts"],
            "extends": [
                "plugin:react/recommended",
                "./node_modules/cloudify-ui-common/configs/eslint-common-react.json",
                "./node_modules/cloudify-ui-common/configs/eslint-common-node.json",
                "plugin:node/recommended-module",
                "./.eslintrc.temp-overrides.json"
            ],
            "rules": {
                "node/no-missing-import": ["error", {"tryExtensions": [".js", ".json", ".ts"]}],
                "no-console": "error",
                "prefer-promise-reject-errors": "off",
                "@typescript-eslint/no-namespace": "off",
                "global-require": "off",
                "import/no-unresolved": "off",
                "node/no-missing-require": [
                    "error",
                    {
                        "allowModules": ["lodash", "body", "elkjs"]
                    }
                ],
                "@typescript-eslint/no-var-requires": "off"
                
            },
            "globals": {
                "_": true,
                "$": true,
                "connectToStore": true,
                "d3": true,
                "log": true,
                "L": true,
                "moment": true,
                "PropTypes": true,
                "React": true,
                "Stage": true
            }
        },
        // from /widgets/.eslint.json
        // NOTE: Turning off react/destructuring-assignment rule for some files as it
        // reports false positives (ref.: https://github.com/yannickcr/eslint-plugin-react/issues/3022)
        {
            "files": ["./widgets/*/src/widget.{jsx,tsx}"],
            "extends": [
                "plugin:react/recommended",
                "./node_modules/cloudify-ui-common/configs/eslint-common-react.json",
                "./.eslintrc.temp-overrides.json"
            ],
            "rules": {
                "no-console": "error",
                "prefer-promise-reject-errors": "off",
                "@typescript-eslint/no-namespace": "off",
                "react/destructuring-assignment": "off"
            },
            "globals": {
                "_": true,
                "$": true,
                "connectToStore": true,
                "d3": true,
                "log": true,
                "L": true,
                "moment": true,
                "PropTypes": true,
                "React": true,
                "Stage": true
            }
        },
        {
            "files": ["backend/**"],
            "extends": [
                "./node_modules/cloudify-ui-common/configs/eslint-common-node.json",
                "plugin:node/recommended-module",
                "./.eslintrc.temp-overrides.json"
            ],
            "rules": {
                "prefer-promise-reject-errors": "off",
                "node/no-missing-require": ["error", {
                    "tryExtensions": [".js", ".ts", ".json"]
                }],
                "node/no-missing-import": ["error", {"tryExtensions": [".js", ".json", ".ts"]}]
            }
        },
        {
            "files": "backend/**/*.js",
            "extends": "./node_modules/cloudify-ui-common/configs/eslint-common-node.json"
        },
        // from /backend/test/.eslintrc.json
        {
            "files": "backend/test/**",
            "plugins": [
                "jest"
            ],
            "extends": [
                "plugin:jest/recommended"
            ],
            "rules": {
                "global-require": "off",
                "no-console": "off",
                "node/no-missing-import": ["error", {"tryExtensions": [".js", ".json", ".ts"], "resolvePaths":  ["backend", ".."]}],
                "import/no-unresolved": "off",
                "import/no-extraneous-dependencies": [
                    "error",
                    {
                        "devDependencies": true
                    }
                ]
            },
            "env": {
                "jest": true
            }
        },
        // from /test/.eslintrc.json
        {
            "files": "test/**",
            "rules": {
                "import/no-extraneous-dependencies": [
                    "error",
                    {
                        "devDependencies": true
                    }
                ],
                "no-console": "off"
            }
        },
        // from /test/jest/.eslintrc.json
        {
            "files": "test/jest/**",
            "plugins": [
                "jest"
            ],
            "extends": [
                "plugin:jest/recommended",
                "plugin:react/recommended",
                "./node_modules/cloudify-ui-common/configs/eslint-common-react.json",
                "./.eslintrc.temp-overrides.json"
            ],
            "settings": {
                "import/resolver": {
                    "jest": {
                        "jestConfigFile": "jest.config.js"
                    }
                }
            },
            "rules": {
                "react/react-in-jsx-scope": "off",
                "import/no-extraneous-dependencies": [
                    "error",
                    {
                        "optionalDependencies": true
                    }
                ]
            },
            "globals": {
                "_": true,
                "$": true,
                "d3": true,
                "log": true,
                "moment": true,
                "Stage": true
            },
            "env": {
                "jest": true
            }
        },
        // from /test/cypress/.eslintrc.json
        {
            "files": "test/cypress/**",
            "extends": [
                "./node_modules/cloudify-ui-common/configs/eslint-common-cypress.json",
                "./.eslintrc.temp-overrides.json"
            ],
            "settings": {
                "import/resolver": {"node": {"moduleDirectory": ["./node_modules", "./"]}}
            }
        }
    ]
}
